var Entropy=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i,o=r(1),s=r(2),u=r(3),c=n(u),a=r(4),f=n(a),h=r(5),p=n(h),d=r(11),l=n(d),y=r(9),v=n(y),m=r(12),_=n(m),g=r(139),b=n(g),w=r(141),x=n(w);(i=console).log.apply(i,["%c %c %c Entropy 0.1.0 - Entity System Framework for JavaScript %c %c ","background: rgb(200, 200,200);","background: rgb(80, 80, 80);","color: white; background: black;","background: rgb(80, 80, 80);","background: rgb(200, 200, 200);"]);var j=(0,o.compose)(c.default,{init:function(t){var e=this;this.component=(0,b.default)(),this.entity=(0,_.default)({game:this}),this.system=(0,x.default)({game:this}),this.engine=(0,p.default)({game:this}),this.state=(0,f.default)(),this.ticker=(0,l.default)({game:this}),["update"].forEach(function(t){e.ticker.on(t,function(){var r;(r=e.engine)[t].apply(r,arguments)})});var r=void 0,n=void 0;"undefined"!=typeof document.hidden?(r="hidden",n="visibilitychange"):"undefined"!=typeof document.msHidden?(r="msHidden",n="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(r="webkitHidden",n="webkitvisibilitychange"),document.addEventListener(n,function(t){e.emit("visibilityChange",{originalEvent:t,hidden:document.hidden})},!1),t.pauseOnHide&&this.on("visibilityChange",function(t){t[r]?e.pause():e.resume()})},methods:{start:function(){this.ticker.start(),this.emit("start")},pause:function(){this.ticker.pause()},resume:function(){this.ticker.resume()},stop:function(t){var e=this;t?(this.engine.once("clear",function(){return e._stopAndEmit()}),this.engine.clear()):this._stopAndEmit()},defineState:function(t){this.state.define(Object.assign({},t,{constArgs:[this]}))},registerEntity:function(){var t;return(t=this.entity).register.apply(t,arguments),this},registerEntities:function(){var t;return(t=this.entity).registerMany.apply(t,arguments),this},createEntity:function(){var t;return(t=this.entity).create.apply(t,arguments)},addEntity:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=(0,s.isObject)(t)?t:this.createEntity.apply(this,[t].concat(r));return this.engine.addEntity(i),this},removeEntity:function(t){this.engine.removeEntity(t)},registerComponent:function(){var t;return(t=this.component).register.apply(t,arguments),this},registerComponents:function(){var t;return(t=this.component).registerMany.apply(t,arguments),this},createComponent:function(){var t;return(t=this.component).create.apply(t,arguments)},registerSystem:function(){var t;return(t=this.system).register.apply(t,arguments),this},registerSystems:function(){var t;return(t=this.system).registerMany.apply(t,arguments),this},createSystem:function(){var t;return(t=this.system).create.apply(t,arguments)},addSystem:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=(0,s.isObject)(t)?t:this.createSystem.apply(this,[t].concat(r));this.engine.addSystem(i)},createQuery:function(t){var e=(0,v.default)({componentsIdsMap:this.component._componentsIdsMap,criterions:t});return e},getEntities:function(t){return this.engine.getEntities(t)},_stopAndEmit:function(){var t=this.ticker.stop();t&&this.emit("stop")}}});t.exports=j},function(t,e){"use strict";function r(t){var e="undefined"==typeof t?"undefined":l(t);return!!t&&("object"===e||"function"===e)}function n(t){return"function"==typeof t}function i(t){return!!t&&"object"===("undefined"==typeof t?"undefined":l(t))&&Object.getPrototypeOf(t)===Object.prototype}function o(t,e){if(void 0===e)return t;if(Array.isArray(e))return(Array.isArray(t)?t:[]).concat(e);if(!i(e))return e;for(var n=r(t)?t:{},s=Object.keys(e),u=0;u<s.length;u+=1){var c=s[u],a=e[c];if(void 0!==a){var f=n[c],h=i(f)||Array.isArray(a)?f:{};n[c]=o(h,a)}}return n}function s(t){return function e(r){for(var i=[],o=arguments.length-1;o-- >0;)i[o]=arguments[o+1];var s=Object.create(t.methods||null);return m(s,t.deepProperties),b(s,t.properties),Object.defineProperties(s,t.propertyDescriptors||{}),t.initializers&&0!==t.initializers.length?(void 0===r&&(r={}),t.initializers.filter(n).reduce(function(t,n){var o=n.call(t,r,{instance:t,stamp:e,args:[r].concat(i)});return void 0===o?t:o},s)):s}}function u(t,e){var r=s(t);m(r,t.staticDeepProperties),b(r,t.staticProperties),Object.defineProperties(r,t.staticPropertyDescriptors||{});var i=n(r.compose)?r.compose:e;return r.compose=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return i.apply(this,t)},b(r.compose,t),r}function c(t,e){var i=e&&e.compose||e;if(!r(i))return t;var o=function(e,n){r(i[e])&&(r(t[e])||(t[e]={}),n(t[e],i[e]))};return o("methods",b),o("properties",b),o("deepProperties",m),o("propertyDescriptors",b),o("staticProperties",b),o("staticDeepProperties",m),o("staticPropertyDescriptors",b),o("configuration",b),o("deepConfiguration",m),Array.isArray(i.initializers)&&(t.initializers=i.initializers.reduce(function(t,e){return n(e)&&t.indexOf(e)<0&&t.push(e),t},Array.isArray(t.initializers)?t.initializers:[])),t}function a(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=[this].concat(t).filter(r).reduce(c,{});return u(n,a)}function f(t){return n(t)&&n(t.compose)}function h(t,e){return function(){for(var r=arguments.length,n=Array(r);r--;)n[r]=arguments[r];var i={};return i[t]=e.apply(void 0,[{}].concat(n)),(this&&this.compose||d).call(this,i)}}function p(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return(this&&this.compose||d).call(this,{initializers:v.apply(void 0,t)})}function d(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t=t.filter(r).map(function(t){return f(t)?t:g(t)}),a.apply(this||T,t)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var y=Array.prototype.concat,v=function(){var t=y.apply([],arguments).filter(n);return 0===t.length?void 0:t},m=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return e.reduce(o,t)},_=Object.assign,g=function(t){void 0===t&&(t={});var e=t.methods,n=t.properties,i=t.props,o=t.refs,s=t.initializers,u=t.init,c=t.deepProperties,a=t.deepProps,f=t.propertyDescriptors,h=t.staticProperties,p=t.statics,d=t.staticDeepProperties,l=t.deepStatics,y=t.staticPropertyDescriptors,g=t.configuration,b=t.conf,w=t.deepConfiguration,x=t.deepConf,j=r(i)||r(o)||r(n)?_({},i,o,n):void 0,S=r(a)?m({},a):void 0;S=r(c)?m(S,c):S;var A=r(p)||r(h)?_({},p,h):void 0,O=r(l)?m({},l):void 0;O=r(d)?m(O,d):O;var P=r(b)||r(g)?_({},b,g):void 0,M=r(x)?m({},x):void 0;return M=r(w)?m(M,w):M,{methods:e,properties:j,initializers:v(u,s),deepProperties:S,staticProperties:A,staticDeepProperties:O,propertyDescriptors:f,staticPropertyDescriptors:y,configuration:P,deepConfiguration:M}},b=Object.assign,w=Object.assign,x=h("methods",w),j=h("properties",w),S=h("deepProperties",m),A=h("staticProperties",w),O=h("staticDeepProperties",m),P=h("configuration",w),M=h("deepConfiguration",m),z=h("propertyDescriptors",w),E=h("staticPropertyDescriptors",w),F={methods:x,properties:j,refs:j,props:j,initializers:p,init:p,deepProperties:S,deepProps:S,staticProperties:A,statics:A,staticDeepProperties:O,deepStatics:O,configuration:P,conf:P,deepConfiguration:M,deepConf:M,propertyDescriptors:z,staticPropertyDescriptors:E},T=a({staticProperties:F},{staticProperties:{create:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return this.apply(void 0,t)},compose:d}}),C=d.bind();d.compose=C;var D=w(d,F);e.methods=x,e.properties=j,e.refs=j,e.props=j,e.initializers=p,e.init=p,e.deepProperties=S,e.deepProps=S,e.staticProperties=A,e.statics=A,e.staticDeepProperties=O,e.deepStatics=O,e.configuration=P,e.conf=P,e.deepConfiguration=M,e.deepConf=M,e.propertyDescriptors=z,e.staticPropertyDescriptors=E,e.compose=C,e.default=D,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.prototype.toString,n=(e.toLowerFirstCase=function(t){return t[0].toLowerCase()+t.slice(1)},e.isFunction=function(t){return"[object Function]"===r.call(t)},e.isString=function(t){return"[object String]"===r.call(t)});e.isArray=function(t){return Array.isArray(t)},e.isObject=function(t){return"[object Object]"===r.call(t)},e.isNonEmptyString=function(t){return n(t)&&""!==t}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),o=r(1),s=n(o),u=(0,s.default)({init:function(){this._events={},this._responding=!0},methods:{on:function(t,e,r){this._events[t]=this._events[t]||[],this._events[t].push({fn:e,once:r})},once:function(t,e){this.on(t,e,!0)},emit:function(t){if(this._responding&&t in this._events){for(var e=this._events[t],r=0,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(;r<e.length;){var s=this._events[t][r],u=s.fn.apply(s,i);if(u===!1||s.once){for(var c=r;c<e.length;)e[c]=e[++c];e.length-=1}else r+=1}}},off:function(t,e){this._events[t]=this._events[t].filter(function(t){return(0,i.isFunction)(e)&&t.fn!==e})},stopResponding:function(){this._responding=!1},startResponding:function(){this._responding=!0}}});e.default=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(1),s=n(o),u=r(2),c=(0,s.default)({deepProperties:{_states:{},_queue:[],_shifting:!1,_currentState:{name:"dummy",transitions:{},constArgs:[]}},init:function(){this._states={},this._queue=[],this._shifting=!1,this._currentState={name:"__dummy",transitions:{},constArgs:[]}},methods:{define:function(t){return this._states[t.name]=Object.assign({},t,{_initialized:!1,manager:this,transitions:t.transitions||{},constArgs:t.constArgs||[]}),this},change:function(t){for(var e=this,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(!((0,u.isString)(t)&&t in this._states))return this;var o=this._states[t],s=function(){return e._shift()};return this._queue.push({fn:function(){return e._exitState(e._currentState,s)}}),o._initialized||(this._queue.push({fn:function(){return e._initializeState(o,s)}}),this._queue.push({fn:function(){return e._setInitialized(o,s)}})),this._queue.push({fn:function(){return e._doTransition.apply(e,[e._currentState,t,o].concat(n,[s]))}}),this._queue.push({fn:function(){return e._enterState(o,s)}}),this._queue.push({fn:function(){return e._setCurrentState(o,s)}}),this._shifting||this._shift(),this},current:function(){return this._currentState.name},isIn:function(t){return t===this._currentState.name},_shift:function(){var t=this._queue.shift();return null==t?void(this._shifting=!1):(this._shifting=!0,t.fn())},_setCurrentState:function(t,e){return this._currentState=t,e()},_setInitialized:function(t,e){return t._initialized=!0,e()},_initializeState:function(t,e){return(0,u.isFunction)(t.initialize)?t.initialize.apply(t,i(t.constArgs).concat([e])):e()},_enterState:function(t,e){return(0,u.isFunction)(t.enter)?t.enter.apply(t,i(t.constArgs).concat([e])):e()},_exitState:function(t,e){return(0,u.isFunction)(t.exit)?t.exit.apply(t,i(t.constArgs).concat([e])):e()},_doTransition:function(t,e,r){for(var n=arguments.length,o=Array(n>3?n-3:0),s=3;s<n;s++)o[s-3]=arguments[s];if(e in t.transitions&&(0,u.isFunction)(t.transitions[e])){var c;return(c=t.transitions)[e].apply(c,[r].concat(i(r.constArgs),o))}var a=o.pop();return a()}}});e.default=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),o=n(i),s=r(6),u=n(s),c=r(7),a=n(c),f=r(3),h=n(f),p=r(8),d=n(p),l=r(9),y=(n(l),r(2)),v=(0,o.default)().init(function(t){var e=1;this._entitiesIdsPool=(0,d.default)({_new:function(){return e++}}),this._systems=(0,a.default)({initialSize:10}),this._entities=(0,a.default)(),this._modifiedEntities=(0,a.default)(),this._entitiesToAdd=(0,a.default)(),this._entitiesToRemove=(0,a.default)(),this._systemsToAdd=(0,a.default)({initialSize:10}),this._systemsToRemove=(0,a.default)({initialSize:10}),this._queries=[],this._entitiesCount=0,this._isClearingScheduled=!1,this._wasClearingPerformed=!1,this.game=t.game}).methods({addEntity:function(t){var e=this;t.isUsed()||t.on("queueModification",function(){e._markModifiedEntity(t)}),this._entitiesToAdd.push(t)},removeEntity:function(t){this._entitiesToRemove.push(t)},addSystem:function(t){this._systemsToAdd.push(t)},removeSystem:function(t){var e=void 0;(0,u.default)(t)?e=t:(0,y.isNonEmptyString)(t)&&(e=this._systems.find(function(e){return e.type===t})),e&&this._systemsToRemove.push(e)},getEntities:function(t){return this._queries.indexOf(t)===-1&&this._initializeQuery(t),t.getEntities()},getAllEntities:function(){return this._entities},update:function(){this._updateSystems.apply(this,arguments),this._isClearingScheduled&&this._performScheduledClearing(),this._removeEntities(),this._addEntities(),this._modifyEntities(),this._removeSystems(),this._addSystems(),this._updateQueries(),this._wasClearingPerformed&&(this.emit("clear"),this._wasClearingPerformed=!1,this._isClearingScheduled=!1)},clear:function(){this._isClearingScheduled=!0},_markModifiedEntity:function(t){0!==t.id&&this._modifiedEntities.indexOf(t)===-1&&this._modifiedEntities.push(t)},_updateSystems:function(){for(var t=0;t<this._systems.length;t+=1){var e=this._systems.arr[t];e._disabled||e.onUpdate.apply(e,arguments)}},_removeEntities:function(){for(;this._entitiesToRemove.length;){var t=this._entitiesToRemove.pop();if(0!==t.id){for(var e=0;e<this._queries.length;e+=1){var r=this._queries[e];r.satisfiedBy(t)&&r.removeFromIndex(t.id)}t.onRemove(t),this._entities.unsetAtIndex(t.id),this._entitiesIdsPool.free(t.id),t.removeAllComponents(),t.id=0,this.game.entity.free(t),this._entitiesCount-=1,this.emit("entityRemove",t)}}},_addEntities:function(){for(;this._entitiesToAdd.length;){var t=this._entitiesToAdd.pop(),e=this._entitiesIdsPool.allocate();t.id=e,this._entities.insertAtIndex(e,t);for(var r=0;r<this._queries.length;r+=1){var n=this._queries[r];n.satisfiedBy(t)&&n.addToIndex(e)}t.emit("add",t),this._entitiesCount+=1,this.emit("entityAdd",t)}},_modifyEntities:function(){for(;this._modifiedEntities.length;)for(var t=this._modifiedEntities.pop(),e=0;e<this._queries.length;e+=1){var r=this._queries[e],n=r.satisfiedBy(t);t.applyModifications();var i=r.satisfiedBy(t);!n&&i?r.addToIndex(t.id):n&&!i&&r.removeFromIndex(t.id)}},_addSystems:function(){for(;this._systemsToAdd.length;){for(var t=this._systemsToAdd.shift(),e=0;e<this._systems.length&&!(this._systems.arr[e].priority>t.priority);e+=1);this._systems.insertBefore(e,t)}},_removeSystems:function(){for(;this._systemsToRemove.length;){var t=this._systemsToRemove.shift(),e=this._systems.indexOf(t);e!==-1&&(t.onRemove(),this._systems.unsetAtIndex(e))}this._systems.compact()},_updateQueries:function(){for(var t=0;t<this._queries.length;t+=1)this._queries[t].update(this._entities)},_performScheduledClearing:function(){this._wasClearingPerformed=!0},_initializeQuery:function(t){t.initialize(this._entities),this._queries.push(t)}}).compose(h.default);e.default=v},function(t,e){"use strict";function r(t){return"function"==typeof t}function n(t){return r(t)&&r(t.compose)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=1,n=2,i=function(t,e){for(var r=new Array(t),n=0;n<t;n++)r[n]=e;return r},o={extend:function(){var t=arguments.length<=0||void 0===arguments[0]?Math.max(Math.ceil(this.maxLength*this.extensionFactor),1):arguments[0],e=this.maxLength;this.arr.length=e+t;for(var r=e,n=this.maxLength=this.arr.length;r<n;r++)this.arr[r]=this.fillValue;return this},insertAtIndex:function(t,e){t>this.maxLength-1&&this.extend(t-this.maxLength+1),this.arr[t]=e,t>=this.length&&(this.length=t+1)},removeAtIndex:function(t){if(t<0||t>=this.length)throw new Error("index is out of array bounds");for(var e=this.arr[t],r=t;r<this.length;)this.arr[r]=this.arr[++r];return this.length--,e},unsetAtIndex:function(t){if(t<0||t>=this.length)throw new Error("index is out of array bounds");var e=this.arr[t];return this.arr[t]=this.fillValue,this.sparse=!0,e},find:function(t){for(var e=0;e<this.length;e++)if(t(this.arr[e]))return this.arr[e]},findAndRemove:function(t){var e=this.indexOf(t);return e!==-1&&this.removeAtIndex(e),e},findAndUnset:function(t){var e=this.indexOf(t);return e!==-1&&this.unsetAtIndex(e),e},indexOf:function(t){for(var e=0;e<this.length;e++)if(this.arr[e]===t)return e;return-1},clear:function(){for(var t=0;t<this.length;t++)this.arr[t]=this.fillValue;return this.length=0,this},push:function(t){if(t===this.fillValue)throw new Error("cannot push value equal to `fillValue`");return this.length===this.maxLength&&this.extend(Math.round(this.maxLength*this.extensionFactor)),this.arr[this.length++]=t,this},shift:function(){return this.removeAtIndex(0)},pop:function(){if(0!==this.length){var t=this.arr[--this.length];return this.arr[this.length]=this.fillValue,t}},insertAfter:function(t,e){this._insertAfterOrBefore(t,e,r)},insertBefore:function(t,e){this._insertAfterOrBefore(t,e,n)},_insertAfterOrBefore:function(t,e,n){this.length===this.maxLength&&this.extend();var i=void 0;i=n===r?t+1:t;for(var o=this.length;o>i;o--)this.arr[o]=this.arr[o-1];this.arr[i]=e,this.length++},compact:function(){if(this.sparse){for(var t=0,e=0;e<this.length;e++)this.arr[e]===this.fillValue?t++:t>0&&(this.arr[e-t]=this.arr[e],this.arr[e]=this.fillValue);this.length-=t,this.sparse=!1}return this}},s=e.FastArray=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=t.fillValue,r=void 0===e?0:e,n=t.initialSize,s=void 0===n?1e3:n,u=t.refillRemoved,c=void 0===u||u,a=t.extensionFactor,f=void 0===a?.5:a,h=Object.create(o);return h.fillValue=r,h.initialSize=s,h.refillRemoved=c,h.extensionFactor=f,h.sparse=!1,h.arr=i(s,r),h.length=0,h.maxLength=s,h};e.default=s},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),o=n(i),s=r(7),u=n(s),c=(0,o.default)({init:function(t){this._pool=(0,u.default)(),this._new=t._new,this._reuse=t._reuse},methods:{free:function(t){this._free&&this._free(t),this._pool.push(t)},allocate:function(){for(var t=void 0,e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=this._pool.length?this._reuse?this._reuse.apply(this,[this._pool.pop()].concat(r)):this._pool.pop():this._new.apply(this,r)}}});e.default=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),o=r(1),s=n(o),u=r(10),c=n(u),a=r(7),f=n(a),h=(0,s.default)({deepProps:{_shouldUpdate:!1},init:function(t){var e=[],r=[],n=void 0,o=void 0;if((0,i.isArray)(t.criterions)?e=t.criterions:(0,i.isObject)(t.criterions)&&((0,i.isNonEmptyString)(t.criterions.entityType)&&(this._matchType=t.criterions.entityType),(0,i.isArray)(t.criterions.include)&&(e=t.criterions.include),(0,i.isArray)(t.criterions.exclude)&&(r=t.criterions.exclude)),e.length>0){n=new c.default;for(var s=0;s<e.length;s+=1)n.add(t.componentsIdsMap[e[s]])}if(r){o=new c.default;for(var u=0;u<r.length;u+=1)o.add(t.componentsIdsMap[r[u]])}this._entitiesIndex=(0,f.default)(),this._matchedEntities=(0,f.default)(),this._includes=n,this._excludes=o},methods:{initialize:function(t){for(var e=0;e<t.length;e+=1){var r=t.arr[e];0!==r&&this.satisfiedBy(r)&&this.addToIndex(r.id)}this.update(t)},satisfiedBy:function(t){var e=!0;return(0,i.isString)(this._matchType)&&(e=t.type===this._matchType),e&&this._includes&&(e=this._includes.intersection_size(t.bitset)===this._includes.size()),e&&this._excludes&&(e=0===this._excludes.intersection_size(t.bitset)),e},shouldUpdate:function(){return this._shouldUpdate},addToIndex:function(t){this._shouldUpdate=!0,this._entitiesIndex.push(t)},removeFromIndex:function(t){var e=this._entitiesIndex.indexOf(t);e!==-1&&(this._shouldUpdate=!0,this._entitiesIndex.unsetAtIndex(e))},getEntities:function(){return this._matchedEntities},update:function(t){if(this._shouldUpdate){this._entitiesIndex.compact(),this._matchedEntities.clear();for(var e=0;e<this._entitiesIndex.length;e+=1){var r=this._entitiesIndex.arr[e];this._matchedEntities.push(t.arr[r])}this._shouldUpdate=!1}}}});e.default=h},function(t,e){"use strict";function r(t){return null!=t&&void 0!==t[Symbol.iterator]}function n(t){this.count=0,this.words=new Array(8);for(var e=0;e<this.words.length;e++)this.words[e]=0;if(r(t)){var n=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var c=s.value;this.add(c)}}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}}}n.prototype.add=function(t){this.count<<5<=t&&this.resize(t),this.words[t>>>5]|=1<<t},n.prototype.flip=function(t){this.count<<5<=t&&this.resize(t),this.words[t>>>5]^=1<<t},n.prototype.clear=function(){this.count=0,this.words=new Array(count)},n.prototype.remove=function(t){this.count<<5<=t&&this.resize(t),this.words[t>>>5]&=~(1<<t)},n.prototype.isEmpty=function(t){for(var e=this.count,r=0;r<e;r++)if(0!==this.words[r])return!1;return!0},n.prototype.has=function(t){return 0!==(this.words[t>>>5]&1<<t)},n.prototype.trim=function(t){for(;this.count>0;)0===this.words[this.count-1]&&this.count--;this.words=this.words.slice(0,this.count)},n.prototype.resize=function(t){if(!(this.count<<5>t)&&(this.count=t+32>>>5,this.words.length<<5<=t)){for(var e=new Array(this.count<<1),r=this.words.length,n=0;n<r;n++)e[n]=this.words[n];for(var i=e.length,n=r;n<i;n++)e[n]=0;this.words=e}},n.prototype.hammingWeight=function(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24},n.prototype.hammingWeight4=function(t,e,r,n){return t-=t>>>1&1431655765,e-=e>>>1&1431655765,r-=r>>>1&1431655765,n-=n>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),e=(858993459&e)+(e>>>2&858993459),r=(858993459&r)+(r>>>2&858993459),n=(858993459&n)+(n>>>2&858993459),t=t+(t>>>4)&252645135,e=e+(e>>>4)&252645135,r=r+(r>>>4)&252645135,n=n+(n>>>4)&252645135,16843009*(t+e+r+n)>>>24},n.prototype.size=function(){for(var t=0,e=this.count,r=this.words,n=0;n<e;n++)t+=this.hammingWeight(r[n]);return t},n.prototype.array=function(){for(var t=new Array(this.size()),e=0,r=0|this.count,n=0;n<r;++n)for(var i=this.words[n];0!=i;){var o=i&-i;t[e++]=(n<<5)+this.hammingWeight(o-1|0),i^=o}return t},n.prototype.forEach=function(t){for(var e=0|this.count,r=0;r<e;++r)for(var n=this.words[r];0!=n;){var i=n&-n;t.call((r<<5)+this.hammingWeight(i-1|0)),n^=i}},n.prototype.clone=function(){var t=Object.create(n.prototype);return t.count=this.count,t.words=this.words.slice(),t},n.prototype.intersects=function(t){for(var e=Math.min(this.count,t.count),r=0;r<e;++r)if(0!==(this.words[r]&t.words[r]))return!0;return!1},n.prototype.intersection=function(t){for(var e=Math.min(this.count,t.count),r=0;r+7<e;r+=8)this.words[r]&=t.words[r],this.words[r+1]&=t.words[r+1],this.words[r+2]&=t.words[r+2],this.words[r+3]&=t.words[r+3],this.words[r+4]&=t.words[r+4],this.words[r+5]&=t.words[r+5],this.words[r+6]&=t.words[r+6],this.words[r+7]&=t.words[r+7];for(;r<e;++r)this.words[r]&=t.words[r];for(var n=this.count,r=e;r<n;++r)this.words[r]=0;return this.count=e,this},n.prototype.intersection_size=function(t){for(var e=Math.min(this.count,t.count),r=0,n=0;n<e;++n)r+=this.hammingWeight(this.words[n]&t.words[n]);return r},n.prototype.new_intersection=function(t){var e=Object.create(n.prototype);e.count=Math.min(this.count,t.count),e.words=new Array(e.count);for(var r=e.count,i=0;i+7<r;i+=8)e.words[i]=this.words[i]&t.words[i],e.words[i+1]=this.words[i+1]&t.words[i+1],e.words[i+2]=this.words[i+2]&t.words[i+2],e.words[i+3]=this.words[i+3]&t.words[i+3],e.words[i+4]=this.words[i+4]&t.words[i+4],e.words[i+5]=this.words[i+5]&t.words[i+5],e.words[i+6]=this.words[i+6]&t.words[i+6],e.words[i+7]=this.words[i+7]&t.words[i+7];for(;i<r;++i)e.words[i]=this.words[i]&t.words[i];return e},n.prototype.equals=function(t){for(var e=Math.min(this.count,t.count),r=0;r<e;++r)if(this.words[r]!=t.words[r])return!1;if(this.count<t.count){for(var n=t.count,r=this.count;r<n;++r)if(0!=t.words[r])return!1}else if(t.count<this.count)for(var n=this.count,r=t.count;r<n;++r)if(0!=this.words[r])return!1;return!0},n.prototype.difference=function(t){for(var e=Math.min(this.count,t.count),r=0;r+7<e;r+=8)this.words[r]&=~t.words[r],this.words[r+1]&=~t.words[r+1],this.words[r+2]&=~t.words[r+2],this.words[r+3]&=~t.words[r+3],this.words[r+4]&=~t.words[r+4],this.words[r+5]&=~t.words[r+5],this.words[r+6]&=~t.words[r+6],this.words[r+7]&=~t.words[r+7];for(;r<e;++r)this.words[r]&=~t.words[r];return this},n.prototype.difference_size=function(t){for(var e=Math.min(this.count,t.count),r=0,n=0;n<e;++n)r+=this.hammingWeight(this.words[n]&~t.words[n]);for(var i=this.count;n<i;++n)r+=this.hammingWeight(this.words[n]);return r},n.prototype.toString=function(){return"{"+this.array().join(",")+"}"},n.prototype.union=function(t){for(var e=Math.min(this.count,t.count),r=0;r+7<e;r+=8)this.words[r]|=t.words[r],this.words[r+1]|=t.words[r+1],this.words[r+2]|=t.words[r+2],this.words[r+3]|=t.words[r+3],this.words[r+4]|=t.words[r+4],this.words[r+5]|=t.words[r+5],this.words[r+6]|=t.words[r+6],this.words[r+7]|=t.words[r+7];for(;r<e;++r)this.words[r]|=t.words[r];if(this.count<t.count){this.resize((t.count<<5)-1);for(var n=t.count,r=e;r<n;++r)this.words[r]=t.words[r];this.count=t.count}return this},n.prototype.new_union=function(t){var e=Object.create(n.prototype);e.count=Math.max(this.count,t.count),e.words=new Array(e.count);for(var r=Math.min(this.count,t.count),i=0;i+7<r;i+=8)e.words[i]=this.words[i]|t.words[i],e.words[i+1]=this.words[i+1]|t.words[i+1],e.words[i+2]=this.words[i+2]|t.words[i+2],e.words[i+3]=this.words[i+3]|t.words[i+3],e.words[i+4]=this.words[i+4]|t.words[i+4],e.words[i+5]=this.words[i+5]|t.words[i+5],e.words[i+6]=this.words[i+6]|t.words[i+6],e.words[i+7]=this.words[i+7]|t.words[i+7];for(;i<r;++i)e.words[i]=this.words[i]|t.words[i];for(var o=this.count,i=r;i<o;++i)e.words[i]=this.words[i];for(var s=t.count,i=r;i<s;++i)e.words[i]=t.words[i];return e},n.prototype.new_difference=function(t){return this.clone().difference(t)},n.prototype.union_size=function(t){for(var e=Math.min(this.count,t.count),r=0,n=0;n<e;++n)r+=this.hammingWeight(this.words[n]|t.words[n]);if(this.count<t.count)for(var i=t.count,n=this.count;n<i;++n)r+=this.hammingWeight(0|t.words[n]);else for(var i=this.count,n=t.count;n<i;++n)r+=this.hammingWeight(0|this.words[n]);return r},t.exports=n},function(t,e,r){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=r(1),s=n(o),u=r(3),c=n(u);!function(){var e="object"===("undefined"==typeof window?"undefined":i(window))?window:t;/**
	   * performance.now polyfill
	   *
	   * @license http://opensource.org/licenses/MIT
	   * Copyright (C) 2015 Paul Irish
	   *
	   * Date.now() is supported everywhere except IE8. For IE8 we use the Date.now polyfill:
	   * github.com/Financial-Times/polyfill-service/blob/master/polyfills/Date.now/polyfill.js
	   *
	   * As Safari 6 doesn't have support for NavigationTiming,
	   * we use a Date.now() timestamp for relative values.
	   */
"performance"in e||(e.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in e.performance||!function(){var t=Date.now();performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),e.performance.now=function(){return Date.now()-t}}(),!function(){for(var t=0,r=["ms","moz","webkit","o"],n=0;n<r.length&&!e.requestAnimationFrame;++n)e.requestAnimationFrame=e[r[n]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[r[n]+"CancelAnimationFrame"]||e[r[n]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(r){var n=(new Date).getTime(),i=Math.max(0,16-(n-t)),o=e.setTimeout(function(){r(n+i)},i);return t=n+i,o}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(t){clearTimeout(t)})}()}();var a=(0,s.default)().init(function(){var t=this;this.simulationTimestep=1e3/60,this.frameDelta=0,this.lastFrameTimeMs=0,this.fps=60,this.lastFpsUpdate=0,this.framesThisSecond=0,this.numUpdateSteps=0,this.minFrameDelay=0,this.running=!1,this.paused=!1,this.started=!1,this.panic=!1,this.rafHandle,this.animate=function(e){if(t.rafHandle=requestAnimationFrame(t.animate),!(e<t.lastFrameTimeMs+t.minFrameDelay)){t.frameDelta+=e-t.lastFrameTimeMs,t.lastFrameTimeMs=e,t.emit("begin",e,t.frameDelta),e>t.lastFpsUpdate+1e3&&(t.fps=.25*t.framesThisSecond+.75*t.fps,t.lastFpsUpdate=e,t.framesThisSecond=0),t.framesThisSecond++;for(var r=0;t.frameDelta>=t.simulationTimestep;)if(t.emit("update",t.simulationTimestep),t.frameDelta-=t.simulationTimestep,++r>=240){t.panic=!0;break}t.emit("draw",t.frameDelta/t.simulationTimestep),t.emit("end",t.fps,t.panic),t.panic=!1}}}).methods({getSimulationTimestep:function(){return this.simulationTimestep},setSimulationTimestep:function(t){return this.simulationTimestep=t,this},getFPS:function(){return this.fps},getMaxAllowedFPS:function(){return 1e3/this.minFrameDelay},setMaxAllowedFPS:function(t){return"undefined"==typeof t&&(this.fps=1/0),0===t?this.stop():this.minFrameDelay=1e3/t,this},resetFrameDelta:function(){var t=this.frameDelta;return this.frameDelta=0,t},start:function(){var t=this;return this.started||(this.started=!0,this.rafHandle=requestAnimationFrame(function(e){t.emit("draw",1),t.running=!0,t.lastFrameTimeMs=e,t.lastFpsUpdate=e,t.framesThisSecond=0,t.rafHandle=requestAnimationFrame(t.animate)})),this},stop:function(){return this.running=!1,this.started=!1,cancelAnimationFrame(this.rafHandle),this},pause:function(){return this.isRunning()&&!this.paused&&(this.paused=!0,this.stop()),this},resume:function(){return this.paused&&(this.paused=!1,this.start()),this},isRunning:function(){return this.running}}).compose(c.default);e.default=a}).call(e,function(){return this}())},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),o=r(13),s=n(o),u=r(2),c=r(138),a=n(c),f=r(8),h=n(f),p=(0,i.compose)({init:function(t){var e=t.game;t.componentStore;this._pools={},this._factories={},this.game=e},methods:{register:function(t){var e=this;this._factories[t.type]=(0,i.compose)(a.default,{methods:(0,s.default)(t,function(t){return(0,u.isFunction)(t)})}),this._pools[t.type]=(0,h.default)({_new:function(){var r=e._factories[t.type]({type:t.type});return r.initialize(),r.onCreate.apply(r,arguments),r},_reuse:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.onReuse(),t.onCreate.apply(t,r),t}})},registerMany:function(t){var e=this;t.forEach(function(t){return e.register(t)})},create:function(t){for(var e,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return(e=this._pools[t]).allocate.apply(e,n)},free:function(t){t.markAsUsed(),this._pools[t.type].free(t)}}});e.default=p},function(t,e,r){"use strict";function n(t,e){if(null==t)return{};var r=i(u(t),function(t){return[t]});return e=o(e),s(t,r,function(t,r){return e(t,r[0])})}var i=r(14),o=r(15),s=r(123),u=r(128);t.exports=n},function(t,e){"use strict";function r(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}t.exports=r},function(t,e,r){"use strict";function n(t){return"function"==typeof t?t:null==t?u:"object"==("undefined"==typeof t?"undefined":i(t))?c(t)?s(t[0],t[1]):o(t):a(t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=r(16),s=r(104),u=r(119),c=r(81),a=r(120);t.exports=n},function(t,e,r){"use strict";function n(t){var e=o(t);return 1==e.length&&e[0][2]?s(e[0][0],e[0][1]):function(r){return r===t||i(r,t,e)}}var i=r(17),o=r(101),s=r(103);t.exports=n},function(t,e,r){"use strict";function n(t,e,r,n){var c=r.length,a=c,f=!n;if(null==t)return!a;for(t=Object(t);c--;){var h=r[c];if(f&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++c<a;){h=r[c];var p=h[0],d=t[p],l=h[1];if(f&&h[2]){if(void 0===d&&!(p in t))return!1}else{var y=new i;if(n)var v=n(d,l,p,t,e,y);if(!(void 0===v?o(l,d,s|u,n,y):v))return!1}}return!0}var i=r(18),o=r(62),s=1,u=2;t.exports=n},function(t,e,r){"use strict";function n(t){var e=this.__data__=new i(t);this.size=e.size}var i=r(19),o=r(27),s=r(28),u=r(29),c=r(30),a=r(31);n.prototype.clear=o,n.prototype.delete=s,n.prototype.get=u,n.prototype.has=c,n.prototype.set=a,t.exports=n},function(t,e,r){"use strict";function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var i=r(20),o=r(21),s=r(24),u=r(25),c=r(26);n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=s,n.prototype.has=u,n.prototype.set=c,t.exports=n},function(t,e){"use strict";function r(){this.__data__=[],this.size=0}t.exports=r},function(t,e,r){"use strict";function n(t){var e=this.__data__,r=i(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():s.call(e,r,1),--this.size,!0}var i=r(22),o=Array.prototype,s=o.splice;t.exports=n},function(t,e,r){"use strict";function n(t,e){for(var r=t.length;r--;)if(i(t[r][0],e))return r;return-1}var i=r(23);t.exports=n},function(t,e){"use strict";function r(t,e){return t===e||t!==t&&e!==e}t.exports=r},function(t,e,r){"use strict";function n(t){var e=this.__data__,r=i(e,t);return r<0?void 0:e[r][1]}var i=r(22);t.exports=n},function(t,e,r){"use strict";function n(t){return i(this.__data__,t)>-1}var i=r(22);t.exports=n},function(t,e,r){"use strict";function n(t,e){var r=this.__data__,n=i(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var i=r(22);t.exports=n},function(t,e,r){"use strict";function n(){this.__data__=new i,this.size=0}var i=r(19);t.exports=n},function(t,e){"use strict";function r(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}t.exports=r},function(t,e){"use strict";function r(t){return this.__data__.get(t)}t.exports=r},function(t,e){"use strict";function r(t){return this.__data__.has(t)}t.exports=r},function(t,e,r){"use strict";function n(t,e){var r=this.__data__;if(r instanceof i){var n=r.__data__;if(!o||n.length<u-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new s(n)}return r.set(t,e),this.size=r.size,this}var i=r(19),o=r(32),s=r(47),u=200;t.exports=n},function(t,e,r){"use strict";var n=r(33),i=r(38),o=n(i,"Map");t.exports=o},function(t,e,r){"use strict";function n(t,e){var r=o(t,e);return i(r)?r:void 0}var i=r(34),o=r(46);t.exports=n},function(t,e,r){"use strict";function n(t){if(!s(t)||o(t))return!1;var e=i(t)?l:a;return e.test(u(t))}var i=r(35),o=r(43),s=r(42),u=r(45),c=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,f=Function.prototype,h=Object.prototype,p=f.toString,d=h.hasOwnProperty,l=RegExp("^"+p.call(d).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},function(t,e,r){"use strict";function n(t){if(!o(t))return!1;var e=i(t);return e==u||e==c||e==s||e==a}var i=r(36),o=r(42),s="[object AsyncFunction]",u="[object Function]",c="[object GeneratorFunction]",a="[object Proxy]";t.exports=n},function(t,e,r){"use strict";function n(t){return null==t?void 0===t?c:u:(t=Object(t),a&&a in t?o(t):s(t))}var i=r(37),o=r(40),s=r(41),u="[object Null]",c="[object Undefined]",a=i?i.toStringTag:void 0;t.exports=n},function(t,e,r){"use strict";var n=r(38),i=n.Symbol;t.exports=i},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=r(39),o="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,s=i||o||Function("return this")();t.exports=s},function(t,e){(function(e){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},n="object"==("undefined"==typeof e?"undefined":r(e))&&e&&e.Object===Object&&e;t.exports=n}).call(e,function(){return this}())},function(t,e,r){"use strict";function n(t){var e=s.call(t,c),r=t[c];try{t[c]=void 0;var n=!0}catch(t){}var i=u.call(t);return n&&(e?t[c]=r:delete t[c]),i}var i=r(37),o=Object.prototype,s=o.hasOwnProperty,u=o.toString,c=i?i.toStringTag:void 0;t.exports=n},function(t,e){"use strict";function r(t){return i.call(t)}var n=Object.prototype,i=n.toString;t.exports=r},function(t,e){"use strict";function r(t){var e="undefined"==typeof t?"undefined":n(t);return null!=t&&("object"==e||"function"==e)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};t.exports=r},function(t,e,r){"use strict";function n(t){return!!o&&o in t}var i=r(44),o=function(){var t=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=n},function(t,e,r){"use strict";var n=r(38),i=n["__core-js_shared__"];t.exports=i},function(t,e){"use strict";function r(t){if(null!=t){try{return i.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var n=Function.prototype,i=n.toString;t.exports=r},function(t,e){"use strict";function r(t,e){return null==t?void 0:t[e]}t.exports=r},function(t,e,r){"use strict";function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var i=r(48),o=r(56),s=r(59),u=r(60),c=r(61);n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=s,n.prototype.has=u,n.prototype.set=c,t.exports=n},function(t,e,r){"use strict";function n(){this.size=0,this.__data__={hash:new i,map:new(s||o),string:new i}}var i=r(49),o=r(19),s=r(32);t.exports=n},function(t,e,r){"use strict";function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var i=r(50),o=r(52),s=r(53),u=r(54),c=r(55);n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=s,n.prototype.has=u,n.prototype.set=c,t.exports=n},function(t,e,r){"use strict";function n(){this.__data__=i?i(null):{},this.size=0}var i=r(51);t.exports=n},function(t,e,r){"use strict";var n=r(33),i=n(Object,"create");t.exports=i},function(t,e){"use strict";function r(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=r},function(t,e,r){"use strict";function n(t){var e=this.__data__;if(i){var r=e[t];return r===o?void 0:r}return u.call(e,t)?e[t]:void 0}var i=r(51),o="__lodash_hash_undefined__",s=Object.prototype,u=s.hasOwnProperty;t.exports=n},function(t,e,r){"use strict";function n(t){var e=this.__data__;return i?void 0!==e[t]:s.call(e,t)}var i=r(51),o=Object.prototype,s=o.hasOwnProperty;t.exports=n},function(t,e,r){"use strict";function n(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=i&&void 0===e?o:e,this}var i=r(51),o="__lodash_hash_undefined__";t.exports=n},function(t,e,r){"use strict";function n(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}var i=r(57);t.exports=n},function(t,e,r){"use strict";function n(t,e){var r=t.__data__;return i(e)?r["string"==typeof e?"string":"hash"]:r.map}var i=r(58);t.exports=n},function(t,e){"use strict";function r(t){var e="undefined"==typeof t?"undefined":n(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};t.exports=r},function(t,e,r){"use strict";function n(t){return i(this,t).get(t)}var i=r(57);t.exports=n},function(t,e,r){"use strict";function n(t){return i(this,t).has(t)}var i=r(57);t.exports=n},function(t,e,r){"use strict";function n(t,e){var r=i(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var i=r(57);t.exports=n},function(t,e,r){"use strict";function n(t,e,r,u,c){return t===e||(null==t||null==e||!o(t)&&!s(e)?t!==t&&e!==e:i(t,e,r,u,n,c))}var i=r(63),o=r(42),s=r(80);t.exports=n},function(t,e,r){"use strict";function n(t,e,r,n,v,_){var g=a(t),b=a(e),w=l,x=l;g||(w=c(t),w=w==d?y:w),b||(x=c(e),x=x==d?y:x);var j=w==y,S=x==y,A=w==x;if(A&&f(t)){if(!f(e))return!1;g=!0,j=!1}if(A&&!j)return _||(_=new i),g||h(t)?o(t,e,r,n,v,_):s(t,e,w,r,n,v,_);if(!(r&p)){var O=j&&m.call(t,"__wrapped__"),P=S&&m.call(e,"__wrapped__");if(O||P){var M=O?t.value():t,z=P?e.value():e;return _||(_=new i),v(M,z,r,n,_)}}return!!A&&(_||(_=new i),u(t,e,r,n,v,_))}var i=r(18),o=r(64),s=r(70),u=r(74),c=r(96),a=r(81),f=r(82),h=r(86),p=1,d="[object Arguments]",l="[object Array]",y="[object Object]",v=Object.prototype,m=v.hasOwnProperty;t.exports=n},function(t,e,r){"use strict";function n(t,e,r,n,a,f){var h=r&u,p=t.length,d=e.length;if(p!=d&&!(h&&d>p))return!1;var l=f.get(t);if(l&&f.get(e))return l==e;var y=-1,v=!0,m=r&c?new i:void 0;for(f.set(t,e),f.set(e,t);++y<p;){var _=t[y],g=e[y];if(n)var b=h?n(g,_,y,e,t,f):n(_,g,y,t,e,f);if(void 0!==b){if(b)continue;v=!1;break}if(m){if(!o(e,function(t,e){if(!s(m,e)&&(_===t||a(_,t,r,n,f)))return m.push(e)})){v=!1;break}}else if(_!==g&&!a(_,g,r,n,f)){v=!1;break}}return f.delete(t),f.delete(e),v}var i=r(65),o=r(68),s=r(69),u=1,c=2;t.exports=n},function(t,e,r){"use strict";function n(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new i;++e<r;)this.add(t[e])}var i=r(47),o=r(66),s=r(67);n.prototype.add=n.prototype.push=o,n.prototype.has=s,t.exports=n},function(t,e){"use strict";function r(t){return this.__data__.set(t,n),this}var n="__lodash_hash_undefined__";t.exports=r},function(t,e){"use strict";function r(t){return this.__data__.has(t)}t.exports=r},function(t,e){"use strict";function r(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}t.exports=r},function(t,e){"use strict";function r(t,e){return t.has(e)}t.exports=r},function(t,e,r){"use strict";function n(t,e,r,n,i,j,A){switch(r){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case w:return!(t.byteLength!=e.byteLength||!j(new o(t),new o(e)));case p:case d:case v:return s(+t,+e);case l:return t.name==e.name&&t.message==e.message;case m:case g:return t==e+"";case y:var O=c;case _:var P=n&f;if(O||(O=a),t.size!=e.size&&!P)return!1;var M=A.get(t);if(M)return M==e;n|=h,A.set(t,e);var z=u(O(t),O(e),n,i,j,A);return A.delete(t),z;case b:if(S)return S.call(t)==S.call(e)}return!1}var i=r(37),o=r(71),s=r(23),u=r(64),c=r(72),a=r(73),f=1,h=2,p="[object Boolean]",d="[object Date]",l="[object Error]",y="[object Map]",v="[object Number]",m="[object RegExp]",_="[object Set]",g="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",x="[object DataView]",j=i?i.prototype:void 0,S=j?j.valueOf:void 0;t.exports=n},function(t,e,r){"use strict";var n=r(38),i=n.Uint8Array;t.exports=i},function(t,e){"use strict";function r(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}t.exports=r},function(t,e){"use strict";function r(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}t.exports=r},function(t,e,r){"use strict";function n(t,e,r,n,s,c){var a=r&o,f=i(t),h=f.length,p=i(e),d=p.length;if(h!=d&&!a)return!1;for(var l=h;l--;){var y=f[l];if(!(a?y in e:u.call(e,y)))return!1}var v=c.get(t);if(v&&c.get(e))return v==e;var m=!0;c.set(t,e),c.set(e,t);for(var _=a;++l<h;){y=f[l];var g=t[y],b=e[y];if(n)var w=a?n(b,g,y,e,t,c):n(g,b,y,t,e,c);if(!(void 0===w?g===b||s(g,b,r,n,c):w)){m=!1;break}_||(_="constructor"==y)}if(m&&!_){var x=t.constructor,j=e.constructor;x!=j&&"constructor"in t&&"constructor"in e&&!("function"==typeof x&&x instanceof x&&"function"==typeof j&&j instanceof j)&&(m=!1)}return c.delete(t),c.delete(e),m}var i=r(75),o=1,s=Object.prototype,u=s.hasOwnProperty;t.exports=n},function(t,e,r){"use strict";function n(t){return s(t)?i(t):o(t)}var i=r(76),o=r(91),s=r(95);t.exports=n},function(t,e,r){"use strict";function n(t,e){var r=s(t),n=!r&&o(t),f=!r&&!n&&u(t),p=!r&&!n&&!f&&a(t),d=r||n||f||p,l=d?i(t.length,String):[],y=l.length;for(var v in t)!e&&!h.call(t,v)||d&&("length"==v||f&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||c(v,y))||l.push(v);return l}var i=r(77),o=r(78),s=r(81),u=r(82),c=r(85),a=r(86),f=Object.prototype,h=f.hasOwnProperty;t.exports=n},function(t,e){"use strict";function r(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}t.exports=r},function(t,e,r){"use strict";var n=r(79),i=r(80),o=Object.prototype,s=o.hasOwnProperty,u=o.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(t){return i(t)&&s.call(t,"callee")&&!u.call(t,"callee")};t.exports=c},function(t,e,r){"use strict";function n(t){return o(t)&&i(t)==s}var i=r(36),o=r(80),s="[object Arguments]";t.exports=n},function(t,e){"use strict";function r(t){return null!=t&&"object"==("undefined"==typeof t?"undefined":n(t))}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};t.exports=r},function(t,e){"use strict";var r=Array.isArray;t.exports=r},function(t,e,r){(function(t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=r(38),o=r(84),s="object"==n(e)&&e&&!e.nodeType&&e,u=s&&"object"==n(t)&&t&&!t.nodeType&&t,c=u&&u.exports===s,a=c?i.Buffer:void 0,f=a?a.isBuffer:void 0,h=f||o;t.exports=h}).call(e,r(83)(t))},function(t,e){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function r(){return!1}t.exports=r},function(t,e){"use strict";function r(t,e){return e=null==e?n:e,!!e&&("number"==typeof t||i.test(t))&&t>-1&&t%1==0&&t<e}var n=9007199254740991,i=/^(?:0|[1-9]\d*)$/;t.exports=r},function(t,e,r){"use strict";var n=r(87),i=r(89),o=r(90),s=o&&o.isTypedArray,u=s?i(s):n;t.exports=u},function(t,e,r){"use strict";function n(t){return s(t)&&o(t.length)&&!!F[i(t)]}var i=r(36),o=r(88),s=r(80),u="[object Arguments]",c="[object Array]",a="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Function]",d="[object Map]",l="[object Number]",y="[object Object]",v="[object RegExp]",m="[object Set]",_="[object String]",g="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",x="[object Float32Array]",j="[object Float64Array]",S="[object Int8Array]",A="[object Int16Array]",O="[object Int32Array]",P="[object Uint8Array]",M="[object Uint8ClampedArray]",z="[object Uint16Array]",E="[object Uint32Array]",F={};F[x]=F[j]=F[S]=F[A]=F[O]=F[P]=F[M]=F[z]=F[E]=!0,F[u]=F[c]=F[b]=F[a]=F[w]=F[f]=F[h]=F[p]=F[d]=F[l]=F[y]=F[v]=F[m]=F[_]=F[g]=!1,t.exports=n},function(t,e){"use strict";function r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}var n=9007199254740991;t.exports=r},function(t,e){"use strict";function r(t){return function(e){return t(e)}}t.exports=r},function(t,e,r){(function(t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=r(39),o="object"==n(e)&&e&&!e.nodeType&&e,s=o&&"object"==n(t)&&t&&!t.nodeType&&t,u=s&&s.exports===o,c=u&&i.process,a=function(){try{return c&&c.binding&&c.binding("util")}catch(t){}}();t.exports=a}).call(e,r(83)(t))},function(t,e,r){"use strict";function n(t){if(!i(t))return o(t);var e=[];for(var r in Object(t))u.call(t,r)&&"constructor"!=r&&e.push(r);return e}var i=r(92),o=r(93),s=Object.prototype,u=s.hasOwnProperty;t.exports=n},function(t,e){"use strict";function r(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||n;return t===r}var n=Object.prototype;t.exports=r},function(t,e,r){"use strict";var n=r(94),i=n(Object.keys,Object);t.exports=i},function(t,e){"use strict";function r(t,e){return function(r){return t(e(r))}}t.exports=r},function(t,e,r){"use strict";function n(t){return null!=t&&o(t.length)&&!i(t)}var i=r(35),o=r(88);t.exports=n},function(t,e,r){"use strict";var n=r(97),i=r(32),o=r(98),s=r(99),u=r(100),c=r(36),a=r(45),f="[object Map]",h="[object Object]",p="[object Promise]",d="[object Set]",l="[object WeakMap]",y="[object DataView]",v=a(n),m=a(i),_=a(o),g=a(s),b=a(u),w=c;(n&&w(new n(new ArrayBuffer(1)))!=y||i&&w(new i)!=f||o&&w(o.resolve())!=p||s&&w(new s)!=d||u&&w(new u)!=l)&&(w=function(t){var e=c(t),r=e==h?t.constructor:void 0,n=r?a(r):"";if(n)switch(n){case v:return y;case m:return f;case _:return p;case g:return d;case b:return l}return e}),t.exports=w},function(t,e,r){"use strict";var n=r(33),i=r(38),o=n(i,"DataView");t.exports=o},function(t,e,r){"use strict";var n=r(33),i=r(38),o=n(i,"Promise");t.exports=o},function(t,e,r){"use strict";var n=r(33),i=r(38),o=n(i,"Set");t.exports=o},function(t,e,r){"use strict";var n=r(33),i=r(38),o=n(i,"WeakMap");t.exports=o},function(t,e,r){"use strict";function n(t){for(var e=o(t),r=e.length;r--;){var n=e[r],s=t[n];e[r]=[n,s,i(s)]}return e}var i=r(102),o=r(75);t.exports=n},function(t,e,r){"use strict";function n(t){return t===t&&!i(t)}var i=r(42);t.exports=n},function(t,e){"use strict";function r(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}t.exports=r},function(t,e,r){"use strict";function n(t,e){return u(t)&&c(e)?a(f(t),e):function(r){var n=o(r,t);return void 0===n&&n===e?s(r,t):i(e,n,h|p)}}var i=r(62),o=r(105),s=r(116),u=r(108),c=r(102),a=r(103),f=r(115),h=1,p=2;t.exports=n},function(t,e,r){"use strict";function n(t,e,r){var n=null==t?void 0:i(t,e);return void 0===n?r:n}var i=r(106);t.exports=n},function(t,e,r){"use strict";function n(t,e){e=i(e,t);for(var r=0,n=e.length;null!=t&&r<n;)t=t[o(e[r++])];return r&&r==n?t:void 0}var i=r(107),o=r(115);t.exports=n},function(t,e,r){"use strict";function n(t,e){return i(t)?t:o(t,e)?[t]:s(u(t))}var i=r(81),o=r(108),s=r(110),u=r(113);t.exports=n},function(t,e,r){"use strict";function n(t,e){if(o(t))return!1;var r="undefined"==typeof t?"undefined":i(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!s(t))||(c.test(t)||!u.test(t)||null!=e&&t in Object(e))}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=r(81),s=r(109),u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;t.exports=n},function(t,e,r){"use strict";function n(t){return"symbol"==("undefined"==typeof t?"undefined":i(t))||s(t)&&o(t)==u}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=r(36),s=r(80),u="[object Symbol]";t.exports=n},function(t,e,r){"use strict";var n=r(111),i=/^\./,o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,u=n(function(t){var e=[];return i.test(t)&&e.push(""),t.replace(o,function(t,r,n,i){e.push(n?i.replace(s,"$1"):r||t)}),e});t.exports=u},function(t,e,r){"use strict";function n(t){var e=i(t,function(t){return r.size===o&&r.clear(),t}),r=e.cache;return e}var i=r(112),o=500;t.exports=n},function(t,e,r){"use strict";function n(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var r=function r(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(n.Cache||i),r}var i=r(47),o="Expected a function";n.Cache=i,t.exports=n},function(t,e,r){"use strict";function n(t){return null==t?"":i(t)}var i=r(114);t.exports=n},function(t,e,r){"use strict";function n(t){if("string"==typeof t)return t;if(s(t))return o(t,n)+"";if(u(t))return f?f.call(t):"";var e=t+"";return"0"==e&&1/t==-c?"-0":e}var i=r(37),o=r(14),s=r(81),u=r(109),c=1/0,a=i?i.prototype:void 0,f=a?a.toString:void 0;t.exports=n},function(t,e,r){"use strict";function n(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}var i=r(109),o=1/0;t.exports=n},function(t,e,r){"use strict";function n(t,e){return null!=t&&o(t,e,i)}var i=r(117),o=r(118);t.exports=n},function(t,e){"use strict";function r(t,e){return null!=t&&e in Object(t)}t.exports=r},function(t,e,r){"use strict";function n(t,e,r){e=i(e,t);for(var n=-1,f=e.length,h=!1;++n<f;){var p=a(e[n]);if(!(h=null!=t&&r(t,p)))break;t=t[p]}return h||++n!=f?h:(f=null==t?0:t.length,!!f&&c(f)&&u(p,f)&&(s(t)||o(t)))}var i=r(107),o=r(78),s=r(81),u=r(85),c=r(88),a=r(115);t.exports=n},function(t,e){"use strict";function r(t){return t}t.exports=r},function(t,e,r){"use strict";function n(t){return s(t)?i(u(t)):o(t)}var i=r(121),o=r(122),s=r(108),u=r(115);t.exports=n},function(t,e){"use strict";function r(t){return function(e){return null==e?void 0:e[t]}}t.exports=r},function(t,e,r){"use strict";function n(t){return function(e){return i(e,t)}}var i=r(106);t.exports=n},function(t,e,r){"use strict";function n(t,e,r){for(var n=-1,u=e.length,c={};++n<u;){var a=e[n],f=i(t,a);r(f,a)&&o(c,s(a,t),f)}return c}var i=r(106),o=r(124),s=r(107);t.exports=n},function(t,e,r){"use strict";function n(t,e,r,n){if(!u(t))return t;e=o(e,t);for(var a=-1,f=e.length,h=f-1,p=t;null!=p&&++a<f;){var d=c(e[a]),l=r;if(a!=h){var y=p[d];l=n?n(y,d,p):void 0,void 0===l&&(l=u(y)?y:s(e[a+1])?[]:{})}i(p,d,l),p=p[d]}return t}var i=r(125),o=r(107),s=r(85),u=r(42),c=r(115);t.exports=n},function(t,e,r){"use strict";function n(t,e,r){var n=t[e];u.call(t,e)&&o(n,r)&&(void 0!==r||e in t)||i(t,e,r)}var i=r(126),o=r(23),s=Object.prototype,u=s.hasOwnProperty;t.exports=n},function(t,e,r){"use strict";function n(t,e,r){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var i=r(127);t.exports=n},function(t,e,r){"use strict";var n=r(33),i=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e,r){"use strict";function n(t){return i(t,s,o)}var i=r(129),o=r(131),s=r(135);t.exports=n},function(t,e,r){"use strict";function n(t,e,r){var n=e(t);return o(t)?n:i(n,r(t))}var i=r(130),o=r(81);t.exports=n},function(t,e){"use strict";function r(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}t.exports=r},function(t,e,r){"use strict";var n=r(130),i=r(132),o=r(133),s=r(134),u=Object.getOwnPropertySymbols,c=u?function(t){for(var e=[];t;)n(e,o(t)),t=i(t);return e}:s;t.exports=c},function(t,e,r){"use strict";var n=r(94),i=n(Object.getPrototypeOf,Object);t.exports=i},function(t,e,r){"use strict";var n=r(94),i=r(134),o=Object.getOwnPropertySymbols,s=o?n(o,Object):i;t.exports=s},function(t,e){"use strict";function r(){return[]}t.exports=r},function(t,e,r){"use strict";function n(t){return s(t)?i(t,!0):o(t)}var i=r(76),o=r(136),s=r(95);t.exports=n},function(t,e,r){"use strict";function n(t){if(!i(t))return s(t);var e=o(t),r=[];for(var n in t)("constructor"!=n||!e&&c.call(t,n))&&r.push(n);return r}var i=r(42),o=r(92),s=r(137),u=Object.prototype,c=u.hasOwnProperty;t.exports=n},function(t,e){"use strict";function r(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}t.exports=r},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(1),s=n(o),u=r(2),c=r(10),a=n(c),f=r(7),h=n(f),p=r(3),d=n(p),l=(0,s.default)({init:function(t){this._modifications=(0,h.default)(),this._used=!1,this.game=t.game,this.type=t.type,this.id=0,this.bitset=new a.default,this.components=this.cs={}},methods:{initialize:function(){},onCreate:function(){},onRemove:function(){},onReuse:function(){},add:function(t){for(var e,r=this,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var s=(0,u.isObject)(t)?t:(e=this.game.component).create.apply(e,[t].concat(i));return 0===this.id?this._addComponent(s):(this._modifications.push({fn:function(){r._addComponent(s)}}),this.emit("queuedModification",this)),this},_addComponent:function(t){this.components[t._propName]=t,this.bitset.add(t._id),this.emit("componentAdd",this,t)},remove:function(t){var e=this,r=(0,u.toLowerFirstCase)(t),n=this.components[r];return 0===this.id?this._removeComponent(n):(this._modifications.push({fn:function(){e._removeComponent(n)}}),this.emit("queueModification",this)),this},removeAllComponents:function(){var t=this;Object.keys(this.components).forEach(function(e){return t._removeComponent(t.components[e])})},_removeComponent:function(t){this.game.component.free(t),this.components[t._propName]=null,this.bitset.remove(t._id),this.emit("componentRemove",this,t)},applyModifications:function(){for(;this._modifications.length;){var t=this._entitiesToAdd.shift();t.fn.apply(t,i(t.args))}},clearModifications:function(){this._modifications.clear()},is:function(t){return this.type===t},markAsUsed:function(){this._used=!0},isUsed:function(){return this._used}}}).compose(d.default);e.default=l},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),o=r(13),s=n(o),u=r(2),c=r(8),a=n(c),f=r(140),h=n(f),p=(0,i.compose)({init:function(){this._greatestComponentId=0,this._componentsIdsMap={},this._pools={},this._factories={}},methods:{register:function(t){var e=this;this._factories[t.type]=(0,i.compose)(h.default,{methods:(0,s.default)(t,function(t){return(0,u.isFunction)(t)})}),this._componentsIdsMap[t.type]=this._greatestComponentId,this._greatestComponentId+=1,this._pools[t.type]=(0,a.default)({_new:function(){var r=e._factories[t.type]({type:t.type,id:e._componentsIdsMap[t.type]});return r.onCreate.apply(r,arguments),r},_reuse:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.onCreate.apply(t,r),t}})},registerMany:function(t){var e=this;t.forEach(function(t){return e.register(t)})},create:function(t){for(var e,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return(e=this._pools[t]).allocate.apply(e,n)},free:function(t){this._pools[t.getType()].free(t)}}});e.default=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(2),o=(0,n.compose)({init:function(t){this._type=t.type,this._id=t.id,this._propName=(0,i.toLowerFirstCase)(t.type)},methods:{onCreate:function(){1===arguments.length&&(0,i.isObject)(arguments.length<=0?void 0:arguments[0])&&Object.assign(this,arguments.length<=0?void 0:arguments[0])},getType:function(){return this._type}}});e.default=o},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),o=r(13),s=n(o),u=r(2),c=r(142),a=n(c),f=(0,i.compose)({init:function(t){this.game=t.game,this._factories={}},methods:{register:function(t){this._factories[t.type]=(0,i.compose)(a.default,{properties:{type:t.type},methods:(0,s.default)(t,function(t){return(0,u.isFunction)(t)})})},registerMany:function(t){var e=this;t.forEach(function(t){
return e.register(t)})},create:function(t){for(var e=this._factories[t]({game:this.game}),r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return e.onCreate.apply(e,n),e}}});e.default=f},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),o=r(3),s=n(o),u=(0,i.compose)({properties:{priority:0,enabled:!0,singleton:!1},init:function(t){this.game=t.game},methods:{onCreate:function(){},onUpdate:function(t){},onEnable:function(){},onDisable:function(){},onRemove:function(){},enable:function(){return this.isEnabled()||(this.enabled=!0,this.emit("enable"),this.stopResponding()),this},disable:function(){return this.isEnabled()&&(this.enabled=!1,this.startResponding(),this.emit("disable")),this},isEnabled:function(){return this.enabled}}},s.default);e.default=u}]);