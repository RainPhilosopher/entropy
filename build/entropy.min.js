/**
* Entropy 0.2.0 - framework for making games and not only games in entity system manner - build: 2014-09-21
*
* @author       Tymoteusz Dzienniak <tymoteusz.dzienniak@outlook.com>
* @license      {@link https://github.com/RainPhilosopher/Entropy/blob/master/LICENSE|MIT License}
*/

!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Entropy=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c,d,e=[].slice;d=function(){function a(a){this.prev=null,this.next=null,this.data=null!=a?a:null}return a}(),c=function(){function a(){this.head=this.tail=null,this._current=this.head}return a.prototype.append=function(a){var b;if(null!=a)return b=new d(a),null==this.head?(this.tail=this.head=b,this):(this.tail.next=b,b.prev=this.tail,this.tail=b,this)},a.prototype.prepend=function(a){var b;if(null!=a)return b=new d(a),null==this.head?(this.tail=this.head=b,this):(this.head.prev=b,b.next=this.head,this.head=b,this)},a.prototype.join=function(b,c){return null==c&&(c=!1),!b instanceof a?(console.warn("DoublyLinkedList.join argument must be type of DoublyLinkedList"),this):null==b.head?this:null==this.head?(this.head=b.head,this.tail=b.tail,this):(c?(b.tail.next=this.head,this.head.prev=b.tail,this.head=b.head,b.tail=this.tail):(b.head.prev=this.tail,this.tail.next=b.head,this.tail=b.tail,b.head=this.head),this)},a.prototype.remove=function(a,b){var c,d,e,f,g,h;if(null==b&&(b=!1),b){for(this.reset();c=this.next();)if(a===c.data){d=c;break}}else d=a;return null!=d&&(null==d.next&&null==d.prev?this.head=this.tail=null:d===this.head?(null!=(e=d.next)&&(e.prev=null),this.head=d.next):d===this.tail?(null!=(f=d.prev)&&(f.next=null),this.tail=d.prev):(null!=(g=d.next)&&(g.prev=d.prev),null!=(h=d.prev)&&(h.next=d.next))),this},a.prototype.pop=function(){},a.prototype.shift=function(){},a.prototype.begin=function(){return this._current=this.head,this},a.prototype.end=function(){return this._current=this.tail,this},a.prototype.next=function(){var a,b;return a=this._current,this._current=null!=(b=this._current)?b.next:void 0,a},a.prototype.prev=function(){var a,b;return a=this._current,this._current=null!=(b=this._current)?b.prev:void 0,a},a.prototype.current=function(){return this._current},a.prototype.iterate=function(){var a,b,c,d;for(c=arguments[0],b=arguments[1],a=3<=arguments.length?e.call(arguments,2):[],this.reset();d=this.next();)c.apply(b,[d,d.data].concat(a));return this},a.prototype.reset=function(a){return null==a&&(a=!1),this._current=a?this.tail:this.head,this},a.prototype.clear=function(){return this.head=this.tail=null,this._current=null,this},a}(),b.exports=c},{}],2:[function(a,b){var c,d,e=[].slice;c=function(){function a(a,b){this.next=null,this.priority=b,this.data=null!=a?a:null}return a}(),d=function(){function a(){this.head=this.tail=null,this._current=this.head}return a.prototype.insert=function(a,b){var d,e;if(e=new c(a,b),null==this.head)return null==e.priority&&(e.priority=0),this.head=this.tail=e,this;if(null==e.priority&&(e.priority=this.tail.priority),null==this.head.next)return this.head.priority<=e.priority?this.head.next=this.tail=e:(e.next=this.tail=this.head,this.head=e),this;if(e.priority>=this.tail.priority)return this.tail=this.tail.next=e,this;if(e.priority<this.head.priority)return e.next=this.head,this.head=e,this;for(d=this.head;null!=d.next;){if(d.next.priority>e.priority){e.next=d.next,d.next=e;break}d=d.next}return this},a.prototype.remove=function(a,b){var c;if(null==b&&(b=!1),null==this.head)return this;if(!b&&a===this.head||b&&a===this.head.data)return this.head===this.tail?this.clear():this.head=this.head.next,this;for(this.reset();c=this.next();)if(!b&&this===c.next||b&&a===c.next.data)return c.next===this.tail?(c.next=null,this.tail=c):c.next=c.next.next,this;return this},a.prototype.begin=function(){return this._current=this.head,this},a.prototype.end=function(){return this._current=this.tail,this},a.prototype.next=function(){var a,b;return a=this._current,this._current=null!=(b=this._current)?b.next:void 0,a},a.prototype.current=function(){return this._current},a.prototype.iterate=function(){var a,b,c,d;for(c=arguments[0],b=arguments[1],a=3<=arguments.length?e.call(arguments,2):[],this.reset();d=this.next();)c.apply(b,[d,d.data].concat(a));return this},a.prototype.reset=function(a){return null==a&&(a=!1),this._current=a?this.tail:this.head,this},a.prototype.clear=function(){return this.head=this.tail=null,this._current=null,this},a}(),b.exports=d},{}],3:[function(a,b){var c,d,e;e=a("../utils/type"),c={debug:3,max_components_count:100,max_frame_time:20,default_time_factor:1,default_fps:60},d={},b.exports=function(a,b){return e.of.string(a)?null==b?a in d?d[a]:a in c?c[a]:null:d[a]=b:null}},{"../utils/type":13}],4:[function(a,b){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=a("../utils/type"),e=a("../debug/debug"),d=a("./event"),c=function(a){function b(){this.componetsPool=[]}return h(b,a),b.Component=function(a){return f.of.object(a)?void((!1 in a||!1 in a)&&e.error('you must define both "name" and "initialize" of component pattern')):void e.error("component pattern must be an object")},b}(d),b.exports=c},{"../debug/debug":9,"../utils/type":13,"./event":5}],5:[function(a,b){var c,d,e=[].slice;d=a("../utils/type"),c=function(){function a(){this.events={}}return a.prototype.on=function(a,b,c,e){var f;return d.of.string(a||!d.of["function"](b))?(null==(f=this.events)[a]&&(f[a]=[]),void this.events[a].push({fn:b,binding:null!=c?c:null,once:null!=e?e:!1})):void 0},a.prototype.once=function(a,b,c){return this.on(a,b,c)},a.prototype.emit=function(){var a,b;return b=arguments[0],a=2<=arguments.length?e.call(arguments,1):[],b in this.events?void(this.events[b]=this.events[b].filter(function(b){return!b.fn.apply(b.binding,a)||!b.once})):void 0},a.prototype.trigger=function(){var a;return a=1<=arguments.length?e.call(arguments,0):[],this.emit.apply(this,a)},a.prototype.off=function(a,b){return d.of.string(a||!a in this.events)?void(this.events[a]=this.events[a].filter(function(a){return null!=b&&a.fn!==b})):void 0},a}(),b.exports=c},{"../utils/type":13}],6:[function(a,b){var c,d,e,f,g,h,i,j,k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};j=a("../utils/type"),i=a("./ticker"),h=a("./state"),e=a("./event"),f=0,d=1,c=2,g=function(a){function b(a){return b.__super__.constructor.call(this),this.ticker=new i(this),this.state=h.State(this),j.of.string(a)&&this.state.change(a),this}return l(b,a),b.State=h.register,b.prototype.start=function(){return this.emit("game:start",this.ticker.start())},b.prototype.pause=function(){return this.emit("game:pause",this.ticker.pause())},b.prototype.resume=function(){return this.emit("game:resume",this.ticker.resume())},b.prototype.stop=function(a){return a?(this.engine.once("engine:clear",function(a){return function(){return a.emit("game:stop",a.ticker.stop())}}(this)),this.engine.clear()):this.emit("game:stop",this.ticker.stop())},b}(e),b.exports=g},{"../utils/type":13,"./event":5,"./state":7,"./ticker":8}],7:[function(a,b,c){var d,e,f,g=[].slice;f=a("../utils/type"),d=a("../debug/debug"),e={},c.State=function(a){var b,c,h,i,j,k,l,m,n,o,p;return l=[],b={transitions:{}},p=!1,o=function(){var a,b,c,d;return d=l.shift(),null==d?void(p=!1):(p=!0,c=d.fn,b=d.binding||null,a=d.args||[],a.push(k),c.apply(b,a))},k=function(){return o()},m=function(a,c){return b=a,c()},n=function(a,b){return a._initialized=!0,b()},j=function(b,c){return f.of["function"](b.initialize)?b.initialize.apply(b,[a,c]):c()},h=function(b,c){return f.of["function"](b.onEnter)?b.onEnter.apply(b,[a,c]):c()},i=function(c){return f.of["function"](b.onExit)?b.onExit.apply(b,[a,c]):c()},c=function(){var c,d,e,f,h;return f=arguments[0],e=arguments[1],c=3<=arguments.length?g.call(arguments,2):[],f in b.transitions?(h=b.transitions[f],b[h].apply(b,[a,e].concat(c))):(d=c.pop())()},{change:function(){var a,b,k;return b=arguments[0],a=2<=arguments.length?g.call(arguments,1):[],f.of.string(b)&&b in e?(k=e[b],l.push({fn:i}),k._initialized||(l.push({fn:j,args:[k]}),l.push({fn:n,args:[k]})),l.push({fn:c,args:[b,k].concat(a)}),l.push({fn:h,args:[k]}),l.push({fn:m,args:[k]}),p?void 0:o()):void d.error('state "'+b+'" does not exist - change will not occur')},current:function(){return b.name},isIn:function(a){return a===b.name}}},c.register=function(a){return f.of.object(a)?("transitions"in a||(a.transitions={}),a._initialized=!1,e[a.name]=a,this):(d.error("registered state must be an object"),this)}},{"../debug/debug":9,"../utils/type":13}],8:[function(a,b){(function(c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=a("../config/config"),g=c.requestAnimationFrame,d=a("./event"),e=function(a){function b(){b.__super__.constructor.call(this),this.FPS=f("default_fps"),this.MAX_FRAME_TIME=f("max_frame_time"),this.TIME_FACTOR=f("default_time_factor"),this._paused=!1,this._running=!1,this._ticks=0,this._lastTime=0,this._currentFPS=this.FPS,this._rafId=-1}return i(b,a),b.prototype.setFPS=function(a){return this.FPS=a||this.FPS},b.prototype.getCurrentFPS=function(){return Math.round(this._currentFPS)},b.prototype.setTimeFactor=function(a){return this.TIME_FACTOR=a||this.TIME_FACTOR},b.prototype.getTicks=function(){return this._ticks},b.prototype.pause=function(){return this._running?(this._paused=!0,!0):!1},b.prototype.resume=function(){return this._running?(this._paused=!1,!0):!1},b.prototype.start=function(){return this._paused&&this.resume(),this._running?!1:(this._rafId=g(this._tick.bind(this)),this.emit("ticker:start"),!0)},b.prototype.stop=function(){return-1!==this._rafId?(c.cancelAnimationFrame(this._rafId),this._running=this._paused=!1,this.emit("ticker:stop"),!0):!1},b.prototype.toggle=function(){return this._running?(this._paused=!this._paused,!0):!1},b.prototype.isPaused=function(){return this._paused},b.prototype.isRunning=function(){return this._running&&!this._paused},b.prototype._tick=function(a){var b,c;return null==a&&(a=performance.now()),this._rafId=g(this._tick.bind(this)),this._paused?void 0:(b=a-this._lastTime,b>=this.MAX_FRAME_TIME&&(b=1e3/this.FPS),this._ticks%this.FPS===0&&(this._currentFPS=1e3/b),c={delta:b*this.TIME_FACTOR,tick:this._ticks,time:a,paused:this._paused},this.emit("ticker:tick",c),this._ticks+=1)},b}(d),b.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../config/config":3,"./event":5}],9:[function(a,b){var c,d=[].slice;c=a("../config/config"),b.exports={log:function(){var a;return a=1<=arguments.length?d.call(arguments,0):[],3===c("debug")?console.log.apply(console,a):void 0},warning:function(){var a;return a=1<=arguments.length?d.call(arguments,0):[],c("debug")>=2?console.warn.apply(console,a):void 0},error:function(){var a;return a=1<=arguments.length?d.call(arguments,0):[],c("debug")>=1?console.error.apply(console,a):void 0}}},{"../config/config":3}],10:[function(a,b){var c,d,e,f,g,h,i,j;a("./utils/polyfill"),j=a("./debug/debug"),c=a("./utils/const"),d=a("./core/engine"),g=a("./collection/doublylinkedlist"),h=a("./collection/orderedlinkedlist"),i=a("./core/ticker"),f=a("./core/game"),console.log.apply(console,["%c %c %c Entropy 0.2.0 - Entity System Framework for JavaScript %c %c ","background: rgb(200, 200,200);","background: rgb(80, 80, 80);","color: white; background: black;","background: rgb(80, 80, 80);","background: rgb(200, 200, 200);"]),e=function(){function a(){j.warning("this function should not be used as a constructor")}return a.Const=function(a,b){return c.call(this,a,b)},a.Game=f,a.Engine=d,a.Ticker=i,a.LinkedList=g,a.OrderedLinkedList=h,a}(),b.exports=e},{"./collection/doublylinkedlist":1,"./collection/orderedlinkedlist":2,"./core/engine":4,"./core/game":6,"./core/ticker":8,"./debug/debug":9,"./utils/const":11,"./utils/polyfill":12}],11:[function(a,b){var c,d;d=a("./type"),c=a("../debug/debug"),b.exports=function(a,b){return null==a||"string"!==d(a)?void c.error("constans key should be non-empty string"):(a=a.toUpperCase(),a in this?c.error("cannot define same constans twice: %s",a):(Object.defineProperty(this,a,{value:b}),b))}},{"../debug/debug":9,"./type":13}],12:[function(){(function(a){!function(){var b,c,d,e,f;if(b=0,d=["ms","moz","webkit","o"],!a.requestAnimationFrame)for(e=0,f=d.length;f>e;e++)c=d[e],a.requestAnimationFrame=a[c+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c+"CancelAnimationFrame"]||a[c+"CancelRequestAnimationFrame"];return a.requestAnimationFrame||(a.requestAnimationFrame=function(c){var d,e,f;return d=(new Date).getTime(),f=Math.max(0,16-(d-b)),e=a.setTimeout(function(){return c(d+f)},f),b=d+f,e}),void(a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){return clearTimeout(a)}))}(),function(){var b,c;return null==a.performance&&(a.performance={}),void(null==a.performance.now&&(b=Date.now(),null!=(null!=(c=a.performance.timing)?c.navigationStart:void 0)&&(b=performance.timing.navigationStart),a.performance.now=function(){return Date.now()-b}))}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(a,b){var c;c=Object.prototype.toString,b.exports={of:{undefined:function(a){return"[object Undefined]"===c.call(a)},"null":function(a){return"[object Null]"===c.call(a)},string:function(a){return"[object String]"===c.call(a)},number:function(a){return"[object Number]"===c.call(a)},"boolean":function(a){return"[object Boolean]"===c.call(a)},"function":function(a){return"[object Function]"===c.call(a)},array:function(a){return"[object Array]"===c.call(a)},date:function(a){return"[object Date]"===c.call(a)},regexp:function(a){return"[object RegExp]"===c.call(a)},object:function(a){return"[object Object]"===c.call(a)}}}},{}]},{},[10])(10)});
//# sourceMappingURL=entropy.map.js